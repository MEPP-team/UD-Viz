<!DOCTYPE html>
<html>
  <head>
    <title>Multiplayer Simple Game test</title>

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>
  <body>
    <script src="../../../packages/browser/dist/release/bundle.js"></script>

    <script>
      // Define geographic extent: CRS, min/max X, min/max Y
      const extent = new udvizBrowser.itowns.Extent(
        'EPSG:4326',
        1837816.94334,
        1847692.32501,
        5170036.4587,
        5178412.82698
      );

      // eslint-disable-next-line no-unused-vars
      const frame3DPlanar = new udvizBrowser.Frame3DPlanar(extent, {
        hasItownsControls: true
      });

      const GameExternalContextScript = class extends udvizBrowser.Game.External
        .ScriptBase {
        init() {
          console.log('hello from game external context ');

          this.context.inputManager.addMouseCommand(
            'command_id',
            'click',
            () => {
              return new udvizBrowser.Shared.Command({
                type: 'toggle_pause'
              });
            }
          );
        }
        static get ID_SCRIPT() {
          return 'game_external_context_script';
        }
      };
      const socketIOWrapper = new udvizBrowser.SocketIOWrapper();
      socketIOWrapper.connectToServer();
      const game = new udvizBrowser.Game.External.MultiPlanarProcess(
        socketIOWrapper,
        extent,
        new udvizBrowser.AssetManager(),
        new udvizBrowser.InputManager(),
        {
          externalGameScriptClass: [GameExternalContextScript],
          gameOrigin: { x: extent.center().x, y: extent.center().y, z: 100 }
        }
      );

      game.start();
    </script>
  </body>
</html>
